<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>库存管理系统 - 管理员界面</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <img src="/images/logo.webp" alt="高力乐 Logo" style="height: 50px;">
            <div>
                <span class="me-3">管理员: admin</span>
                <button class="btn btn-info me-2" data-bs-toggle="modal" data-bs-target="#changePasswordModal">修改密码</button>
                <button onclick="exportToImage()" class="btn btn-success me-2">导出数据</button>
                <button onclick="logout()" class="btn btn-danger">退出登录</button>
            </div>
        </div>

        <div class="row">
            <!-- 库存列表 -->
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">库存列表</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>商品编号</th>
                                        <th>商品名称</th>
                                        <th>当前库存</th>
                                        <th>库存预警</th>
                                        <th>入库总额</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="inventoryList"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 添加商品表单 -->
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">添加商品</h5>
                    </div>
                    <div class="card-body">
                        <form id="addItemForm">
                            <div class="mb-3">
                                <label for="itemName" class="form-label">商品名称</label>
                                <input type="text" class="form-control" id="itemName" name="itemName" required>
                            </div>
                            <div class="mb-3">
                                <label for="itemPrice" class="form-label">价格</label>
                                <input type="number" class="form-control" id="itemPrice" name="itemPrice" step="0.01" required>
                            </div>
                            <div class="mb-3">
                                <label for="itemStock" class="form-label">初始库存</label>
                                <input type="number" class="form-control" id="itemStock" name="itemStock" required>
                            </div>
                            <div class="mb-3">
                                <label for="warningValue" class="form-label">库存预警值</label>
                                <input type="number" class="form-control" id="warningValue" name="warningValue" required>
                            </div>
                            <button type="submit" class="btn btn-primary">添加商品</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- 操作记录 -->
        <div class="card mt-4">
            <div class="card-header">
                <h5 class="card-title mb-0">操作记录</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>时间</th>
                                <th>商品</th>
                                <th>操作类型</th>
                                <th>数量</th>
                                <th>操作人</th>
                                <th>备注</th>
                            </tr>
                        </thead>
                        <tbody id="operationList"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- 用户管理 -->
        <div class="card mt-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">用户管理</h5>
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addUserModal">添加用户</button>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>用户名</th>
                                <th>角色</th>
                                <th>创建时间</th>
                            </tr>
                        </thead>
                        <tbody id="usersList"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- 添加用户模态框 -->
        <div class="modal fade" id="addUserModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">添加用户</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <form id="addUserForm">
                            <div class="mb-3">
                                <label class="form-label">用户名</label>
                                <input type="text" class="form-control" id="newUsername" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">密码</label>
                                <input type="password" class="form-control" id="newPassword" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                        <button type="button" class="btn btn-primary" onclick="addUser()">添加</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 修改密码模态框 -->
        <div class="modal fade" id="changePasswordModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">修改密码</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <form id="changePasswordForm">
                            <div class="mb-3">
                                <label class="form-label">原密码</label>
                                <input type="password" class="form-control" id="changeOldPassword" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">新密码</label>
                                <input type="password" class="form-control" id="changeNewPassword" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">确认新密码</label>
                                <input type="password" class="form-control" id="changeConfirmPassword" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                        <button type="button" class="btn btn-primary" onclick="changePassword()">确认修改</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 引入 admin.js -->
    <script src="/js/admin.js"></script>
</body>
</html>
